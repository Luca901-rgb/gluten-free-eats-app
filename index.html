
<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Gluten Free Eats</title>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script>
      // Aggiungi timestamp per prevenire il caching
      window.BUILD_TIMESTAMP = new Date().getTime();
      
      // Pulisci cache all'avvio
      function clearAllCaches() {
        // Cancella localStorage
        try {
          localStorage.clear();
          console.log('localStorage cleared');
        } catch (e) {
          console.error('Error clearing localStorage:', e);
        }
        
        // Cancella sessionStorage
        try {
          sessionStorage.clear();
          console.log('sessionStorage cleared');
        } catch (e) {
          console.error('Error clearing sessionStorage:', e);
        }
        
        // Cancella caches API
        if ('caches' in window) {
          caches.keys().then(names => {
            names.forEach(name => {
              caches.delete(name).then(() => {
                console.log('Cache deleted:', name);
              });
            });
          });
        }
      }
      
      // Esegui all'avvio
      clearAllCaches();
      
      // Aggiungi un parametro di query con timestamp a tutti gli asset
      document.addEventListener('DOMContentLoaded', function() {
        const timestamp = new Date().getTime();
        document.querySelectorAll('script[src], link[rel="stylesheet"][href]').forEach(el => {
          const urlAttr = el.src ? 'src' : 'href';
          if (el[urlAttr] && !el[urlAttr].includes('?v=')) {
            el[urlAttr] = el[urlAttr] + '?v=' + timestamp;
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
